<html>
<head>
	<title>DistancesMedellin</title>

	<link rel="stylesheet"  href="css/leaflet.css"/> 

	<script src="js/leaflet.js"></script>

	<script src="js/jquery-3.2.1.min.js">  </script>

	<script src="https://releases.route360.net/r360-js/latest.js"></script>

	<style>
	#map{position:absolute; top:0; bottom:0; left:0; width: 100%;}
	</style>


</head>
<body>
	<div id="map"></div>

	<script>
//initializing the map
var latlon = [40.732, -73.99]

var map = L.map('map').setView(latlon, 14);
// add attribution for the transit data used by the r360 polygon service
map.attributionControl.addAttribution("Lots of data")

//add background tile layers


r360.basemap({ style: 'basic', apikey: "A6JVYV2QT7NFKQSRODZZLR3" }).addTo(map);




//define new marker
var marker = L.marker((latlon)).addTo(map);

var polygonLayer = r360.leafletPolygonLayer().addTo(map);




//load GeoJSON file containing sites, and style points
 //  	$.getJSON('data/plaguetimeline.geojson',function(plagueData){
	//     	L.geoJson(plagueData, {
	//     	pointToLayer: function(feature, latlng) {
	// 	return L.marker(latlng, {
	// 	icon: myIcon});
	// },
	//     	onEachFeature: onEachFeature,
	//     	}).addTo(map);
	//     }); 


//define popup content for site annotations
// function onEachFeature(feature, layer) {
//     if (feature.properties && feature.properties.Event) {
//         layer.bindPopup(feature.properties.Year + '<br/>' + feature.properties.Event);
//     }
// }

// L.geoJSON(geojsonFeature, {

// 	onEachFeature: onEachFeature
// }).addTo(map);

var travelOptions = r360.travelOptions();
// please contact us and request your own key
travelOptions.setServiceKey("A6JVYV2QT7NFKQSRODZZLR3");
// set the service url for your area
travelOptions.setServiceUrl("https://service.route360.net/northamerica/");
// we only have one source which is the marker we just added
travelOptions.addSource(marker);
// we want to have polygons for 10 to 30 minutes
travelOptions.setTravelTimes([600, 1200, 1800]);
// go by foot
travelOptions.setTravelType("walk");


r360.PolygonService.getTravelTimePolygons(travelOptions, function(polygons){

    // add the returned polygons to the polygon layer
    // and zoom the map to fit the polygons perfectly
    polygonLayer.clearAndAddLayers(polygons, true);
});

	</script>
</body>
</html>
